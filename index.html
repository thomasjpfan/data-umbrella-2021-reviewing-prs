<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.75.1"><meta charset=utf-8><title>Three Components for Reviewing a Pull Request</title><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black-translucent"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><link rel=stylesheet href=/data-umbrella-2021-reviewing-prs/reveal-js/css/reset.css><link rel=stylesheet href=/data-umbrella-2021-reviewing-prs/reveal-js/css/reveal.css><link rel=stylesheet href=/data-umbrella-2021-reviewing-prs/_.min.4dd4d51512546a0fe1940cf92b43509e9abf3d8f6c3c6907d3be3af5a30c2602.css id=theme><link rel=stylesheet href=/data-umbrella-2021-reviewing-prs/highlight-js/monokai-sublime.min.css></head><body><div class=reveal><div class=slides><section><h1 id=three-components-for-reviewing-a-pull-request>Three Components for Reviewing a Pull Request</h1><p>Thomas J. Fan</p><p><p class=social-author>@thomasjpfan</p><a href=https://www.github.com/thomasjpfan target=_blank><span class="icon icon-github icon-left"></span></a><a href=https://www.twitter.com/thomasjpfan target=_blank><span class="icon icon-twitter"></span></a><div></div><a class=this-talk-link , href=https://github.com/thomasjpfan/data-umbrella-2021-reviewing-prs target=_blank>This talk on Github: thomasjpfan/data-umbrella-2021-reviewing-prs</a></p></section><section><h2 id=three-components-for-reviewing-a-pull-request-1>Three Components for Reviewing a Pull Request</h2><div class="g g-middle"><div class=g-1><h3 id=overview><strong>Overview</strong></h3><ol><li>Mechanics</li><li>Social Aspects</li><li>Technical Aspects</li></ol></div><div class=g-1><p>Thomas J. Fan</p><p class=social-author>@thomasjpfan</p><a href=https://www.github.com/thomasjpfan target=_blank><span class="icon icon-github icon-left"></span></a><a href=https://www.twitter.com/thomasjpfan target=_blank><span class="icon icon-twitter"></span></a><div></div><a class=this-talk-link , href=https://github.com/thomasjpfan/data-umbrella-2021-reviewing-prs target=_blank>This talk on Github: thomasjpfan/data-umbrella-2021-reviewing-prs</a></div></div></section><section><div class="g g-middle"><div class=g-1><h1 id=glossary>Glossary</h1><ul><li>PR: Pull request</li><li>Reviewer: Person reviewing the pull request</li><li>Author: Person who create the pull request</li></ul></div><div class=g-1><figure><img src=images/dictionary.jpg height=500px></figure></div></div></section><section><h1 id=why-code-review-->Why code review? üîé üíª</h1><div class="g g-middle"><div class=g-1><figure><img src=images/why-review.jpg height=500px></figure></div><div class=g-1><ul><li>Correctness</li><li>Maintainability</li><li>Knowledge sharing</li></ul></div></div></section><section><h1 id=1-mechanics>1. Mechanics</h1><figure><img src=images/mechanics.jpg height=550px></figure></section><section><h1 id=mechanics-of-reviewing-a-pull-request-on-github->Mechanics of Reviewing a Pull Request on GitHub üõ†</h1></section><section><figure><img src=images/scikit-learn-main.png width=100%></figure></section><section><figure><img src=images/pull_request_list.png width=100%></figure></section><section><figure><img src=images/pull_request_single.png width=100%></figure></section><section><figure><img src=images/pull_request_files_changed.png width=100%></figure></section><section><figure><img src=images/suggestion-dialog.png width=100%></figure></section><section><div class="g g-middle"><div class=g-1><figure><img src=images/markdown.png width=100%></figure></div><div class=g-1><figure><img src=images/markdown-rendered.png width=50%></figure></div></div></section><section><figure><img src=images/numpy-suggestions.png width=100%></figure></section><section><figure><img src=images/multi-suggestions.png width=100%></figure></section><section><h1 id=demo>Demo</h1></section><section><figure><img src=images/pull_request_review_options.png width=100%></figure></section><section><h1 id=browsing-code-in-github>Browsing code in GitHub</h1><ul><li><code>t</code>: Activate the file finder</li><li><code>l</code>: Jump to a line in your code</li><li><code>b</code>: Open blame view</li></ul></section><section><figure><img src=images/ci-checks.png width=100%></figure></section><section><h1 id=demo-1>Demo</h1></section><section><h2 id=overview-of-mechanics>Overview of Mechanics</h2><ul><li>Markdown with some extras</li><li>Use suggestions when possible</li><li>Check and Navigate the CI</li><li><a href=https://docs.github.com/en/github/getting-started-with-github/using-github/keyboard-shortcuts#source-code-browsing>GitHub Keyboard</a> shortcuts for browsing code</li></ul></section><section><div class="g g-middle"><div class=g-1><h1 id=2-social-aspects>2. Social Aspects</h1><ul><li>Collaboration</li><li>Conversational</li><li>Contributor In the Loop</li></ul></div><div class=g-1><figure><img src=images/collaborate.jpg width=100%></figure></div></div></section><section><h1 id=ask-dont-tell>Ask, Don&rsquo;t Tell</h1><div class=g><div class="g-1 g-success"><h2 id=heading>‚úÖ</h2><p>This would cause a performance issue. We can cache the results and use it again for sequential calls. What do you think?</p></div><div class="g-1 g-alert"><h2 id=heading>‚ùå</h2><p>Never do this. It is very slow.</p></div></div></section><section><h1 id=offer-alternative-implementations>Offer Alternative Implementations</h1><div class=g><div class="g-1 g-success"><h2 id=heading>‚úÖ</h2><p>This leads to a memory regression. May we try using batched calls to reduce the memory overhead? Something like this:</p><p><strong>Insert code snippet</strong></p></div><div class="g-1 g-alert"><h2 id=heading>‚ùå</h2><p>This leads to a memory regression.</p></div></div></section><section><h1 id=explain-why-code-should-be-changed>Explain why code should be changed</h1><div class=g><div class="g-1 g-success"><h2 id=heading>‚úÖ</h2><p>We have similar logic in multiple places in this PR. Can we refactor this into its own function to be more DRY?</p></div><div class="g-1 g-alert"><h2 id=heading>‚ùå</h2><p>Please refactor this into its own function.</p></div></div></section><section><h1 id=explain-why-code-should-be-changed-1>Explain why code should be changed</h1><figure><img src=images/kwargs-explain.png width=100%></figure></section><section><h1 id=avoid-using-derogatory-terms>Avoid using derogatory terms</h1><div class=g><div class="g-1 g-success"><h2 id=heading>‚úÖ</h2><p>We can improve this function by adding more input validation and tests on the following edge cases:</p><p><strong>List edge cases</strong></p></div><div class="g-1 g-alert"><h2 id=heading>‚ùå</h2><p>This whole function is stupid.</p></div></div></section><section><h1 id=be-humble>Be humble</h1><h4 id=assume-everyone-is-intelligent-and-well-meaning><strong>Assume everyone is intelligent and well-meaning</strong></h4><div class=g><div class="g-1 g-success"><h2 id=heading>‚úÖ</h2><p>I checked the reference and it uses the following equation:</p><p><strong>Insert Equation</strong></p><p>I do not think this matches our implementation. What do you think?</p></div><div class="g-1 g-alert"><h2 id=heading>‚ùå</h2><p>I have 20 years of experience and this is clearly wrong.</p></div></div></section><section><h1 id=ask-for-clarification>Ask for clarification</h1><div class=g><div class="g-1 g-success"><h2 id=heading>‚úÖ</h2><p>This is part of the code is unclear. What was your reasoning behind using a queue here?</p></div><div class="g-1 g-alert"><h2 id=heading>‚ùå</h2><p>This is confusing.</p></div></section><section><h1 id=communicate-which-ideas-you-do-not-feel-strongly-about>Communicate which ideas you do not feel strongly about</h1><figure><img src=images/no-strong-opinion.png width=100%></figure></section><section><h1 id=communicate-which-ideas-you-feel-strongly-about>Communicate which ideas you feel strongly about</h1><figure><img src=images/strong-opinion.png width=100%></figure></section><section><h1 id=try-to-leave-a-positive-comment>Try to leave a positive comment</h1><div class="g-1 g-success"><h2 id=heading>‚úÖ</h2><p>This is a very clever usage of <code>defaultdict</code>!</p></div></section><section><h1 id=thank-contributors-for-their-work>Thank contributors for their work</h1><div class="g-1 g-success"><h2 id=heading>‚úÖ</h2><p>Thank you for the PR @thomasjpfan!</p></div></section><section><h1 id=general-social-aspects->General Social Aspects üéô</h1><ul><li>Be explicit</li><li>Do not be sarcastic</li><li>Keep the discussion around the code</li><li>Self-directed commentary: &ldquo;I feel&rdquo;, and " I think"</li></ul></section><section><div class="g g-middle"><div class=g-2><h2 id=disagreement>Disagreement</h2><ul><li>Inevitable and good: People are engaged</li><li>Keep it positive</li><li>When code gets to a certain level of quality, disagreement is more about tradeoffs.</li><li>Get more opinions: Ping other contributors that are familiar with the code or the subject</li></ul></div><div class=g-1><figure><img src=images/two-birds.jpg width=100%></figure></div></div></section><section><div class="g g-middle"><div class=g-2><h1 id=talk-synchronously>Talk synchronously</h1><ul><li>If there are too many &ldquo;I do not understand&rdquo; or &ldquo;alternative solutions&rdquo;</li><li>Keep meeting notes and comment on the PR about the discussion</li></ul></div><div class=g-1><figure><img src=images/laptop.jpg width=100%></figure></div></div></section><section><div class="g g-middle"><div class=g-1><h1 id=2-social-aspects>2. Social Aspects</h1><ul><li>Collaboration</li><li>Conversational</li><li>Contributor In the Loop</li></ul></div><div class=g-1><figure><img src=images/collaborate.jpg width=100%></figure></div></div></section><section><div class="g g-middle"><div class=g-1><h1 id=3-technical-aspects>3. Technical aspects</h1><ul><li>Presentation</li><li>Engineering</li><li>Testing</li></ul></div><div class=g-1><figure><img src=images/technical.jpg width=100%></figure></div></div></section><section><h1 id=presentation>Presentation</h1><h3 id=3-technical-aspects><strong>3. Technical aspects</strong></h3><figure><img src=images/presentation.jpg width=55%></figure></section><section><h2 id=does-the-description-describe-why-the-change-is-being-made>Does the description describe why the change is being made?</h2><ul><li>Matches the contents of the PR</li></ul><figure><img src=images/describe-pr.png width=100%></figure></section><section><h2 id=familiarize-yourself-with-the-context-of-the-issue-and-why-the-pull-request-exists>Familiarize yourself with the context of the issue and why the Pull request exists.</h2><figure><img src=images/describe-pr.png width=100%></figure></section><section><h2 id=do-we-want-this-new-feature->Do we want this new feature? ü§î</h2><ul><li>Make sure that the team and the community wants to build the feature</li><li>Every line of code we add means more code size and more maintenance</li></ul></section><section><h2 id=was-unrelated-code-changed->Was unrelated code changed? üõ†</h2><ul><li>Only include files that are directly related to the change</li></ul><pre><code class=language-json>{
    &quot;editor.formatOnSave&quot;: false,
}
</code></pre></section><section><div class="g g-middle"><div class=g-1><h2 id=is-the-pr-easy-to-review>Is the PR easy to review?</h2><ul><li>Difficulty of reviewing a PR scales non-linearly with size</li><li>Suggest how to split the PR into smaller PRs</li></ul></div><div class=g-1><figure><img src=images/connections.jpg width=100%></figure></div></div></section><section><h2 id=is-the-pr-easy-to-review>Is the PR easy to review?</h2><figure><img src=images/super-long.png width=100%></figure><p><strong>Some PRs must be large because they require major design changes</strong></p></section><section><h1 id=engineering>Engineering</h1><h3 id=3-technical-aspects-1><strong>3. Technical aspects</strong></h3></section><section><h2 id=every-change-should-be-intentional>Every change should be intentional</h2><figure><img src=images/paperclips-change.jpg width=100%></figure></section><section><h2 id=offer-ways-to-simplify-or-improve-code>Offer ways to simplify or improve code</h2><figure><img src=images/offer.jpg width=70%></figure></section><section><div class="g g-middle"><div class=g-1><h2 id=was-a-core-component-changed>Was a core component changed?</h2><ul><li>Needs to be discussed</li><li>Extra scrutiny</li></ul></div><div class=g-1><figure><img src=images/needle-core-changed.jpg width=100%></figure></div></div></section><section><h2 id=does-the-change-maintain-backwards-compatibility>Does the change maintain backwards compatibility?</h2><figure><img src=images/puzzle-bc.jpg width=70%></figure></section><section><div class="g g-middle"><div class=g-1><h2 id=could-the-change-be-more-generally-applicable-elsewhere-in-the-codebase>Could the change be more generally applicable elsewhere in the codebase?</h2><ul><li>Small changes: encourage the author to make the changes</li><li>Big changes: open another issue to track it</li></ul></div><div class=g-1><figure><img src=images/nail-applicable.jpg width=100%></figure></div></div></section><section><h2 id=does-the-change-use-idiomatic-or-existing-functionally-in-the-codebase>Does the change use idiomatic or existing functionally in the codebase?</h2><figure><img src=images/tools-exist.jpg width=50%></figure><p><strong>There could be helper functions already implemented</strong></p></section><section><h2 id=will-the-change-break-something-planned-in-the-future>Will the change break something planned in the future?</h2><figure><img src=images/planning.jpg width=60%></figure><p><strong>It may directly contradict planned future work</strong></p></section><section><h2 id=performance-optimizations>Performance optimizations</h2><h4 id=require-benchmarks><strong>Require Benchmarks</strong></h4><ul><li><a href=https://pypi.org/project/memory-profiler/>memory-profiler</a></li><li><a href=https://github.com/plasma-umass/scalene>scalene</a></li><li><a href=https://github.com/pythonspeed/filprofiler>filprofiler</a></li><li><a href=https://github.com/benfred/py-spy>py-spy</a></li><li><a href=https://viztracer.readthedocs.io>viztracer</a></li></ul></section><section><div class="g g-middle"><div class=g-1><h2 id=is-there-documentation>Is there documentation?</h2><ul><li>User guide and documentation</li><li>Audience</li></ul></div><div class=g-1><figure><img src=images/audience.jpg width=100%></figure></div></div></section><section><h3 id=application-examples>Application (Examples)</h3><figure><img src=images/example.png width=100%></figure></section><section><h3 id=understanding-user-guide>Understanding (User Guide)</h3><figure><img src=images/user-guide.png width=100%></figure></section><section><h3 id=details-api-docs>Details (API docs)</h3><figure><img src=images/api.png width=100%></figure></section><section><div class="g g-middle"><div class=g-1><h2 id=code-comments>Code comments</h2><ul><li>Subtle changes</li><li>Are comments out of date?</li></ul></div><div class=g-2><figure><img src=images/code-comments.png width=100%></figure></div></div></section><section><div class="g g-middle"><div class=g-1><h2 id=was-there-a-hack>Was there a hack?</h2><ul><li>Needs to be discussed</li><li>Code comments</li></ul></div><div class=g-2><figure><img src=images/hacking.jpg width=100%></figure></div></div></section><section><h1 id=testing>Testing</h1><h3 id=3-technical-aspects-2><strong>3. Technical aspects</strong></h3></section><section><div class="g g-middle"><div class=g-2><h2 id=are-there-tests>Are there tests?</h2><ul><li>Help tell us if we break something in the future</li><li>Help tell us if the PR is correct</li><li>Bug fixes require non-regression tests: failed before and no longer fails</li></ul></div><div class=g-1><figure><img src=images/testing.jpg width=100%></figure></div></div></section><section><h2 id=when-is-it-okay-not-have-test->When is it okay not have test? üß™</h2><ul><li>Documentation</li><li>Performance optimizations</li><li>Memory optimizations</li></ul></section><section><h1 id=are-the-tests-comprehensive>Are the tests comprehensive?</h1><figure><img src=images/airplane-config.jpg width=60%></figure><p><strong>Test the different options or input types of a function</strong></p></section><section><div class="g g-middle"><div class=g-1><h2 id=ci-test-fails-what-does-it-mean>CI test fails what does it mean?</h2><ul><li>Can be unrelated</li><li>Can be linting error</li><li>Can be an actual error</li></ul></div><div class=g-1><figure><img src=images/ci-checks.png width=100%></figure></div></div></section><section><div class="g g-middle"><div class=g-1><h1 id=3-technical-aspects>3. Technical aspects</h1><ul><li>Presentation</li><li>Engineering</li><li>Testing</li></ul></div><div class=g-1><figure><img src=images/technical.jpg width=100%></figure></div></div></section><section><div class="g g-middle"><div class=g-1><h1 id=why-code-review-->Why code review? üîé üíª</h1><div class="g g-middle"><div class=g-1><figure><img src=images/why-review.jpg height=500px></figure></div><div class=g-1><ul><li>Correctness</li><li>Maintainability</li><li>Knowledge sharing</li></ul></div></div></section><section><h2 id=three-components-for-reviewing-a-pull-request>Three Components for Reviewing a Pull Request</h2><div class=g><div class=g-1><h3 id=overview><strong>Overview</strong></h3><ol><li>Mechanics</li><li>Social Aspects</li><li>Technical Aspects</li></ol></div><div class=g-1><p>Thomas J. Fan</p><p class=social-author>@thomasjpfan</p><a href=https://www.github.com/thomasjpfan target=_blank><span class="icon icon-github icon-left"></span></a><a href=https://www.twitter.com/thomasjpfan target=_blank><span class="icon icon-twitter"></span></a><div></div><a class=this-talk-link , href=https://github.com/thomasjpfan/data-umbrella-2021-reviewing-prs target=_blank>This talk on Github: thomasjpfan/data-umbrella-2021-reviewing-prs</a></div></div></div></div></div></section></div></div><script type=text/javascript src=/data-umbrella-2021-reviewing-prs/reveal-hugo/object-assign.js></script><a href=/data-umbrella-2021-reviewing-prs/reveal-js/css/print/ id=print-location style=display:none></a><script type=text/javascript>var printLocationElement=document.getElementById('print-location');var link=document.createElement('link');link.rel='stylesheet';link.type='text/css';link.href=printLocationElement.href+(window.location.search.match(/print-pdf/gi)?'pdf.css':'paper.css');document.getElementsByTagName('head')[0].appendChild(link);</script><script type=application/json id=reveal-hugo-site-params>{"custom_theme":"custom-theme.scss","custom_theme_compile":true,"height":720,"highlight_theme":"monokai-sublime","transition_speed":"fast","width":1280}</script><script type=application/json id=reveal-hugo-page-params>null</script><script src=/data-umbrella-2021-reviewing-prs/reveal-js/js/reveal.js></script><script type=text/javascript>function camelize(map){if(map){Object.keys(map).forEach(function(k){newK=k.replace(/(\_\w)/g,function(m){return m[1].toUpperCase()});if(newK!=k){map[newK]=map[k];delete map[k];}});}
return map;}
var revealHugoDefaults={center:true,controls:true,history:true,progress:true,transition:"slide"};var revealHugoSiteParams=JSON.parse(document.getElementById('reveal-hugo-site-params').innerHTML);var revealHugoPageParams=JSON.parse(document.getElementById('reveal-hugo-page-params').innerHTML);var options=Object.assign({},camelize(revealHugoDefaults),camelize(revealHugoSiteParams),camelize(revealHugoPageParams));Reveal.initialize(options);</script><script type=text/javascript src=/data-umbrella-2021-reviewing-prs/reveal-js/plugin/markdown/marked.js></script><script type=text/javascript src=/data-umbrella-2021-reviewing-prs/reveal-js/plugin/markdown/markdown.js></script><script type=text/javascript src=/data-umbrella-2021-reviewing-prs/reveal-js/plugin/highlight/highlight.js></script><script type=text/javascript src=/data-umbrella-2021-reviewing-prs/reveal-js/plugin/zoom-js/zoom.js></script><script type=text/javascript src=/data-umbrella-2021-reviewing-prs/reveal-js/plugin/notes/notes.js></script><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']]},svg:{fontCache:'global'}};</script><script type=text/javascript id=MathJax-script async src=https://thomasjpfan.github.io/data-umbrella-2021-reviewing-prs//javascript/tex-svg.js></script><link rel="shortcut icon" href=https://thomasjpfan.github.io/data-umbrella-2021-reviewing-prs//favicon.ico></body></html>